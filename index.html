<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chronos Hacker Typer Enhanced</title>
<style>
  body {
    background-color: black;
    color: #00FF00;
    font-family: 'Courier New', Courier, monospace;
    margin: 0;
    padding: 10px;
    overflow: hidden;
  }
  #terminal {
    max-width: 900px;
    height: 95vh;
    margin: 0 auto;
    background: black;
    border: 2px solid #00ff00;
    padding: 10px;
    overflow-y: auto;
    white-space: pre-wrap;
    font-size: 16px;
    line-height: 1.3;
    outline: none;
  }
  .line {
    display: block;
    margin-bottom: 2px;
  }
  .prompt {
    color: #00ff00;
    user-select: none;
  }
  #inputLine {
    display: inline;
  }
  #cursor {
    display: inline-block;
    width: 9px;
    height: 18px;
    background: #00ff00;
    margin-left: 2px;
    animation: blink 1s steps(2, start) infinite;
    vertical-align: bottom;
  }
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  .userCommand {
    color: #66ff66;
  }
</style>
</head>
<body>
  <div id="terminal" tabindex="0" aria-label="Terminal window" role="textbox" aria-multiline="true" spellcheck="false">
    <div class="line"><span class="prompt">Chronos_>&nbsp;</span><span id="inputLine"></span><span id="cursor"></span></div>
  </div>

<script>
  const terminal = document.getElementById('terminal');
  let inputLine = document.getElementById('inputLine');
  const cursor = document.getElementById('cursor');

  const codeSnippets = [
    `#include <stdio.h>\nint main() {\n  printf("Hacking started...");\n  return 0;\n}\n// Connecting to server...\nSocket opened.\n`,
    `function hack() {\n  for(let i=0; i<1000000; i++) {\n    let code = "ACCESS GRANTED";\n  }\n}\nhack();\n// Accessing database...\n`,
    `sudo apt-get install hackertools\nDownloading exploits...\nExploit launched.\nRoot access obtained.\n`,
    `var access = false;\ntry {\n  access = true;\n} catch(e) {\n  access = false;\n}\nconsole.log("Access level:", access);\n`,
    `SELECT * FROM users WHERE password = '123456';\nDROP TABLE secure;\n-- Executing SQL Injection...\nSuccess.\n`
  ];

  let snippetIndex = 0;
  let charIndex = 0;
  let commandBuffer = '';
  let fastMode = false;  // npm start mode flag
  let autoSpamActive = false;
  let autoSpamInterval = null;
  let autoSpamSpeed = 10;

  const normalCharsPerKey = 10;
  const fastCharsPerKey = 50;

  terminal.focus();

  function scrollBottom() {
    terminal.scrollTop = terminal.scrollHeight;
  }

  function appendLine(text = '') {
    const line = document.createElement('div');
    line.className = 'line';
    line.innerHTML = `<span class="prompt">Chronos_>&nbsp;</span>${text}`;
    terminal.appendChild(line);
    scrollBottom();
  }

  function resetInputLine() {
    inputLine.textContent = '';
    commandBuffer = '';
  }

  function setNewInputLine() {
    // Remove old input line, add new blank prompt line
    if (inputLine.parentNode) {
      inputLine.parentNode.remove();
    }
    const newLine = document.createElement('div');
    newLine.className = 'line';
    newLine.innerHTML = '<span class="prompt">Chronos_>&nbsp;</span><span id="inputLine"></span><span id="cursor"></span>';
    terminal.appendChild(newLine);
    scrollBottom();
    inputLine = document.getElementById('inputLine');
    // cursor already exists, reappend it to new line
    newLine.appendChild(cursor);
  }

  function typeCodeChars() {
    const text = codeSnippets[snippetIndex];
    const charsPerKey = fastMode ? fastCharsPerKey : normalCharsPerKey;

    if (charIndex < text.length) {
      const chunk = text.substr(charIndex, charsPerKey);
      if (inputLine.textContent.length + chunk.length < 80) {
        inputLine.textContent += chunk;
      } else {
        appendLine(inputLine.textContent);
        setNewInputLine();
        inputLine.textContent += chunk;
      }
      charIndex += chunk.length;
      scrollBottom();
    } else {
      appendLine(inputLine.textContent);
      setNewInputLine();
      charIndex = 0;
      snippetIndex = (snippetIndex + 1) % codeSnippets.length;
    }
  }

  function startAutoSpam(speed = 10) {
    if (autoSpamActive) return;
    autoSpamActive = true;
    autoSpamSpeed = speed;
    let linesTyped = 0;
    appendLine(`Starting auto spam with speed: ${speed}ms per line...`);
    setNewInputLine();
    autoSpamInterval = setInterval(() => {
      const snippet = codeSnippets[snippetIndex];
      const snippetLen = 30 + Math.floor(Math.random() * 70);
      appendLine(snippet.substr(0, snippetLen));
      snippetIndex = (snippetIndex + 1) % codeSnippets.length;
      linesTyped++;
      scrollBottom();
      if (linesTyped >= 1000) {
        clearInterval(autoSpamInterval);
        autoSpamActive = false;
        appendLine("Auto spam finished. Press Enter to continue.");
        setNewInputLine();
      }
    }, autoSpamSpeed);
  }

  function simulateInstall() {
    appendLine("Starting installation of hackertyper as Chronos file...");
    setTimeout(() => appendLine("Creating Chronos directory..."), 1000);
    setTimeout(() => appendLine("Downloading hackertyper package..."), 2000);
    setTimeout(() => appendLine("Extracting files..."), 3000);
    setTimeout(() => appendLine("Setting up environment variables..."), 4000);
    setTimeout(() => appendLine("Installation complete! You can now run 'hackertyper'."), 5000);
    setTimeout(() => appendLine("Run 'hackertyper' to start the game."), 5500);
  }

  const extraCommands = {
    help: `
Available commands:
start [speed] - Autospam terminal (speed in ms)
install       - Installs hackertyper (simulated)
npm start     - Accelerated typing mode
clear         - Clears terminal screen
date          - Shows current date/time
banner        - Shows cool ASCII banner
hack          - Pretends to hack rapidly
version       - Shows version info
echo          - Echoes input text
exit          - Exits npm start mode
`,

    clear: function() {
      terminal.innerHTML = `<div class="line"><span class="prompt">Chronos_>&nbsp;</span><span id="inputLine"></span></div>`;
      inputLine = document.getElementById('inputLine');
      terminal.appendChild(cursor);
      scrollBottom();
    },

    date: function() {
      appendLine(new Date().toString());
    },

    banner: function() {
      appendLine(`
  _    _            _                   _____                   
 | |  | |          | |                 |  __ \\                  
 | |__| | __ _  ___| | _____ _ __ ___ | |__) |_ _ _ __ ___  ___ 
 |  __  |/ _\` |/ __| |/ / _ \\ '__/ _ \\|  ___/ _\` | '__/ _ \\/ __|
 | |  | | (_| | (__|   <  __/ | | (_) | |  | (_| | | |  __/\\__ \\
 |_|  |_|\\__,_|\\___|_|\\_\\___|_|  \\___/|_|   \\__,_|_|  \\___||___/
      `);
    },

    hack: function() {
      let count = 0;
      let hackInterval = setInterval(() => {
        appendLine("Hacking mainframe... access level " + Math.floor(Math.random() * 100) + "%");
        scrollBottom();
        count++;
        if (count > 30) clearInterval(hackInterval);
      }, 100);
    },

    version: function() {
      appendLine("Chronos Hacker Typer v2.6");
    },

    echo: function(args) {
      appendLine(args.join(' '));
    },

    exit: function() {
      if (fastMode) {
        fastMode = false;
        appendLine("Exited npm start fast typing mode.");
        charIndex = 0;
        snippetIndex = 0;
      } else {
        appendLine("No active fast mode to exit.");
      }
    }
  };

  function processCommand(input) {
    let cmd = input.trim();
    let cmdParts = cmd.split(/\s+/);
    let baseCmd = cmdParts[0];
    let args = cmdParts.slice(1);

    appendLine(`<span class='userCommand'>${cmd}</span>`);
    resetInputLine();

    if (cmd === '') return;

    if (baseCmd === 'start') {
      let speed = args.length > 0 ? parseInt(args[0]) : 10;
      if (isNaN(speed) || speed < 1) speed = 10;
      startAutoSpam(speed);
      return;
    }

    if (baseCmd === 'install') {
      simulateInstall();
      return;
    }

    if (baseCmd === 'npm' && args[0] === 'start') {
      fastMode = true;
      appendLine("Accelerated npm start mode enabled.");
      charIndex = 0;
      snippetIndex = 0;
      return;
    }

    if (extraCommands.hasOwnProperty(baseCmd)) {
      let action = extraCommands[baseCmd];
      if (typeof action === 'function') {
        action(args);
      } else {
        appendLine(action);
      }
      return;
    }

    // special multi-word command echo
    if (baseCmd === 'echo') {
      extraCommands.echo(args);
      return;
    }

    if (fastMode) {
      fastMode = false;
      appendLine("Exited npm start mode.");
      charIndex = 0;
      snippetIndex = 0;
    }

    appendLine(`Command not found: ${cmd}`);
  }

  function handleTyping(key) {
    if (autoSpamActive) {
      // When spam active, wait for Enter to reset prompt and stop spam
      if (key === 'Enter') {
        clearInterval(autoSpamInterval);
        autoSpamActive = false;
        appendLine('Auto spam interrupted. Ready for commands.');
        setNewInputLine();
      }
      return;
    }
    if (key === 'Backspace') {
      if (commandBuffer.length > 0) {
        commandBuffer = commandBuffer.slice(0, -1);
        inputLine.textContent = commandBuffer;
      }
      return;
    }
    if (key.length === 1) {
      commandBuffer += key;
      inputLine.textContent = commandBuffer;
      return;
    }
  }

  terminal.addEventListener('keydown', e => {
    e.preventDefault();

    if (e.key === 'Enter') {
      if (autoSpamActive) {
        clearInterval(autoSpamInterval);
        autoSpamActive = false;
        appendLine('Auto spam interrupted. Ready for commands.');
        setNewInputLine();
      } else {
        processCommand(commandBuffer);
      }
      return;
    }

    if (!fastMode) {
      typeCodeChars();
      handleTyping(e.key);
    } else {
      typeCodeChars();
    }
    scrollBottom();
  });
</script>
</body>
</html>
